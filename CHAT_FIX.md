# ğŸ”§ å‰ç«¯å¯¹è¯AIè¿æ¥ä¿®å¤

## âŒ é—®é¢˜æè¿°

å‰ç«¯çš„å¯¹è¯AIè¿æ¥äº†é”™è¯¯çš„SDKï¼ˆCodeBuddyï¼‰ï¼Œå¯¼è‡´ï¼š
- ä½¿ç”¨çš„æ˜¯æ¨¡æ‹ŸåŠŸèƒ½
- æ— æ³•è¯»å–æœ¬åœ°çŸ¥è¯†åº“
- éœ€è¦å¤–éƒ¨CodeBuddy SDKæ”¯æŒ

## å·²ä¿®å¤

### ä¿®æ”¹å†…å®¹

**æ–‡ä»¶**: `src/components/ChatBotModal.tsx`

**ä¿®æ”¹å‰**:
```typescript
const [useCodeBuddy, setUseCodeBuddy] = useState(true); // é»˜è®¤ä½¿ç”¨ CodeBuddy SDK
```

**ä¿®æ”¹å**:
```typescript
const [useCodeBuddy, setUseCodeBuddy] = useState(false); // æ”¹ä¸ºä½¿ç”¨æœ¬åœ°çŸ¥è¯†åº“
```

### æ•ˆæœ

ç°åœ¨å‰ç«¯å¯¹è¯AIä¼šï¼š
1. è°ƒç”¨æœ¬åœ°çŸ¥è¯†åº“API (`/api/chat`)
2. è¯»å–é¢„è®¾çš„37å¼ å››è‰²å¡ç‰‡çŸ¥è¯†åº“
3. æä¾›åŸºäºçŸ¥è¯†åº“çš„æ™ºèƒ½å›ç­”
4. ä¸ä¾èµ–å¤–éƒ¨CodeBuddy SDK

---

## ğŸ¯ ä¸¤ç§èŠå¤©æœåŠ¡å¯¹æ¯”

### 1. æœ¬åœ°çŸ¥è¯†åº“æœåŠ¡ï¼ˆç°åœ¨ä½¿ç”¨ï¼‰âœ…

| ç‰¹æ€§ | è¯´æ˜ |
|------|------|
| **APIç«¯ç‚¹** | `http://localhost:8000/api/chat` |
| **æœåŠ¡æ–‡ä»¶** | `chatService.ts` |
| **åç«¯è·¯ç”±** | `backend/routes/chat_routes.py` |
| **çŸ¥è¯†æ¥æº** | 37å¼ é¢„è®¾å››è‰²å¡ç‰‡ |
| **ä¾èµ–** | ä»…éœ€åç«¯æœåŠ¡è¿è¡Œ |
| **åŠŸèƒ½** | åŸºäºçŸ¥è¯†åº“çš„æ™ºèƒ½é—®ç­” |

### 2. CodeBuddy SDKæœåŠ¡ï¼ˆå·²ç¦ç”¨ï¼‰

| ç‰¹æ€§ | è¯´æ˜ |
|------|------|
| **APIç«¯ç‚¹** | `http://localhost:8000/api/codebuddy-chat` |
| **æœåŠ¡æ–‡ä»¶** | `codebuddyChatService.ts` |
| **åç«¯è·¯ç”±** | `backend/routes/codebuddy_chat_routes.py` |
| **çŸ¥è¯†æ¥æº** | CodeBuddy SDK + çŸ¥è¯†åº“ |
| **ä¾èµ–** | éœ€è¦CodeBuddy SDKå®‰è£… |
| **åŠŸèƒ½** | å¢å¼ºå‹èŠå¤©ï¼ˆéœ€è¦å¤–éƒ¨SDKï¼‰ |

---

## ğŸ“š çŸ¥è¯†åº“å†…å®¹

åç«¯é¢„è®¾äº†**37å¼ å››è‰²å¡ç‰‡**ï¼Œæ¶µç›–ï¼š

### ğŸ”µ è“è‰²å¡ç‰‡ï¼ˆäº‹å®ï¼‰- 10å¼ 
- Antinetç³»ç»Ÿæ¦‚è¿°
- æ ¸å¿ƒä»·å€¼
- æŠ€æœ¯æ¶æ„
- NPUæ€§èƒ½æŒ‡æ ‡
- éƒ¨ç½²ç¯å¢ƒè¦æ±‚
- ç­‰...

### ğŸŸ¢ ç»¿è‰²å¡ç‰‡ï¼ˆè§£é‡Šï¼‰- 10å¼ 
- ä¸ºä»€ä¹ˆä½¿ç”¨NPU
- å››è‰²å¡ç‰‡æ–¹æ³•è®º
- ç«¯ä¾§AIä¼˜åŠ¿
- è™šæ‹Ÿç¯å¢ƒçš„ä½œç”¨
- ç­‰...

### ğŸŸ¡ é»„è‰²å¡ç‰‡ï¼ˆé£é™©ï¼‰- 9å¼ 
- NPUè®¾å¤‡åˆ›å»ºå¤±è´¥
- æ¨¡å‹åŠ è½½å¤±è´¥
- ä¾èµ–å®‰è£…å¤±è´¥
- ç«¯å£è¢«å ç”¨
- ç­‰...

### ğŸ”´ çº¢è‰²å¡ç‰‡ï¼ˆè¡ŒåŠ¨ï¼‰- 8å¼ 
- å¦‚ä½•å¯åŠ¨æœåŠ¡
- å¦‚ä½•åœæ­¢æœåŠ¡
- å¦‚ä½•å¥åº·æ£€æŸ¥
- å¦‚ä½•ä¿®å¤NPUé—®é¢˜
- ç­‰...

---

## ğŸš€ éªŒè¯ä¿®å¤

### 1. é‡å¯å‰ç«¯æœåŠ¡

```cmd
# å¦‚æœå‰ç«¯æ­£åœ¨è¿è¡Œï¼Œå…ˆåœæ­¢ï¼ˆCtrl+Cï¼‰
# ç„¶åé‡æ–°å¯åŠ¨
cd C:\test\antinet
pnpm run dev
```

### 2. æµ‹è¯•å¯¹è¯AI

1. æ‰“å¼€æµè§ˆå™¨è®¿é—® http://localhost:3000
2. ç‚¹å‡»å³ä¸‹è§’çš„èŠå¤©æœºå™¨äººå›¾æ ‡
3. è¾“å…¥æµ‹è¯•é—®é¢˜ï¼Œä¾‹å¦‚ï¼š
   - "Antinetæ˜¯ä»€ä¹ˆï¼Ÿ"
   - "å¦‚ä½•å¯åŠ¨æœåŠ¡ï¼Ÿ"
   - "NPUæœ‰ä»€ä¹ˆä¼˜åŠ¿ï¼Ÿ"
   - "é‡åˆ°ç«¯å£è¢«å ç”¨æ€ä¹ˆåŠï¼Ÿ"

### 3. é¢„æœŸæ•ˆæœ

**æ­£ç¡®çš„å“åº”**:
```
ğŸ¤– çŸ¥è¯†åº“åŠ©æ‰‹

Antinetæ™ºèƒ½çŸ¥è¯†ç®¡å®¶æ˜¯ä¸€æ¬¾éƒ¨ç½²äºéªé¾™AIPCçš„ç«¯ä¾§æ™ºèƒ½æ•°æ®å·¥ä½œç«™...

ğŸ“š å‚è€ƒæ¥æºï¼š
1. [äº‹å®] Antinetç³»ç»Ÿæ¦‚è¿° (ç›¸ä¼¼åº¦: 95%)
2. [è§£é‡Š] ç«¯ä¾§AIä¼˜åŠ¿ (ç›¸ä¼¼åº¦: 87%)
```

**é”™è¯¯çš„å“åº”**ï¼ˆå¦‚æœè¿˜åœ¨ä½¿ç”¨CodeBuddyï¼‰:
```
 åç«¯æœåŠ¡æœªè¿æ¥

å½“å‰ä½¿ç”¨æ¨¡æ‹Ÿæ¨¡å¼æ¼”ç¤ºåŠŸèƒ½...
```

---

## ğŸ” æ£€æŸ¥APIç«¯ç‚¹

### æŸ¥çœ‹çŸ¥è¯†åº“APIæ–‡æ¡£

è®¿é—®: http://localhost:8000/docs

æ‰¾åˆ°ä»¥ä¸‹ç«¯ç‚¹ï¼š

1. **POST /api/chat/query** - çŸ¥è¯†åº“æŸ¥è¯¢
   - è¾“å…¥: ç”¨æˆ·é—®é¢˜ + å¯¹è¯å†å²
   - è¾“å‡º: å›ç­” + çŸ¥è¯†æ¥æº

2. **POST /api/chat/search** - å¡ç‰‡æœç´¢
   - è¾“å…¥: æœç´¢å…³é”®è¯
   - è¾“å‡º: åŒ¹é…çš„å¡ç‰‡åˆ—è¡¨

3. **GET /api/chat/cards** - è·å–æ‰€æœ‰å¡ç‰‡
   - è¾“å‡º: 37å¼ é¢„è®¾å¡ç‰‡

### æµ‹è¯•APIï¼ˆä½¿ç”¨curlæˆ–Swagger UIï¼‰

```bash
# æµ‹è¯•çŸ¥è¯†åº“æŸ¥è¯¢
curl -X POST "http://localhost:8000/api/chat/query" \
  -H "Content-Type: application/json" \
  -d '{
    "query": "Antinetæ˜¯ä»€ä¹ˆï¼Ÿ",
    "conversation_history": []
  }'
```

**é¢„æœŸå“åº”**:
```json
{
  "response": "Antinetæ™ºèƒ½çŸ¥è¯†ç®¡å®¶æ˜¯ä¸€æ¬¾éƒ¨ç½²äºéªé¾™AIPCçš„ç«¯ä¾§æ™ºèƒ½æ•°æ®å·¥ä½œç«™...",
  "sources": [
    {
      "card_id": "fact_001",
      "card_type": "blue",
      "title": "Antinetç³»ç»Ÿæ¦‚è¿°",
      "similarity": 0.95
    }
  ],
  "cards": [...]
}
```

---

##  å‰ç«¯ä»£ç é€»è¾‘

### èŠå¤©æµç¨‹

```typescript
const handleSend = async () => {
  // 1. åˆ›å»ºç”¨æˆ·æ¶ˆæ¯
  const userMessage = { role: 'user', content: input };
  
  // 2. è°ƒç”¨API
  if (useCodeBuddy && sdkAvailable) {
    // âŒ ä½¿ç”¨ CodeBuddy SDKï¼ˆå·²ç¦ç”¨ï¼‰
    response = await codebuddyChatService.chat(input, history);
  } else {
    // ä½¿ç”¨æœ¬åœ°çŸ¥è¯†åº“ï¼ˆç°åœ¨ä½¿ç”¨ï¼‰
    response = await chatService.query(input, history);
  }
  
  // 3. æ˜¾ç¤ºå›ç­”å’Œæ¥æº
  const assistantMessage = {
    role: 'assistant',
    content: response.response,
    sources: response.sources
  };
}
```

### APIè°ƒç”¨

**chatService.ts**:
```typescript
export const chatService = {
  // æŸ¥è¯¢çŸ¥è¯†åº“
  async query(query: string, history: ChatMessage[]): Promise<ChatResponse> {
    return apiCall<ChatResponse>('/query', {
      method: 'POST',
      body: JSON.stringify({
        query,
        conversation_history: history
      })
    });
  }
}
```

---

## ğŸ› æ•…éšœæ’æŸ¥

### é—®é¢˜1: ä»ç„¶æ˜¾ç¤º"åç«¯æœåŠ¡æœªè¿æ¥"

**åŸå› **: åç«¯æœåŠ¡æœªå¯åŠ¨

**è§£å†³**:
```cmd
cd C:\test\antinet
start_backend.bat
```

### é—®é¢˜2: å›ç­”æ˜¯"æ¨¡æ‹Ÿæ¨¡å¼"

**åŸå› **: å‰ç«¯ä»£ç æœªæ›´æ–°æˆ–ç¼“å­˜é—®é¢˜

**è§£å†³**:
```cmd
# 1. åœæ­¢å‰ç«¯æœåŠ¡ï¼ˆCtrl+Cï¼‰
# 2. æ¸…é™¤ç¼“å­˜
pnpm run dev --force

# 3. æˆ–è€…ç¡¬åˆ·æ–°æµè§ˆå™¨ï¼ˆCtrl+Shift+Rï¼‰
```

### é—®é¢˜3: çŸ¥è¯†åº“å›ç­”ä¸å‡†ç¡®

**åŸå› **: é¢„è®¾çŸ¥è¯†åº“å†…å®¹æœ‰é™

**è§£å†³**: åç«¯çš„çŸ¥è¯†åº“æ˜¯é¢„è®¾çš„37å¼ å¡ç‰‡ï¼Œå¯ä»¥é€šè¿‡ä»¥ä¸‹æ–¹å¼æ‰©å±•ï¼š
1. ä¿®æ”¹ `backend/routes/chat_routes.py` ä¸­çš„ `PRESET_KNOWLEDGE_CARDS`
2. æˆ–è€…å®ç°çœŸæ­£çš„å‘é‡æ£€ç´¢ï¼ˆéœ€è¦é¢å¤–é…ç½®ï¼‰

---

## ğŸ‰ æ€»ç»“

### å·²ä¿®å¤
- å‰ç«¯å¯¹è¯AIæ”¹ä¸ºä½¿ç”¨æœ¬åœ°çŸ¥è¯†åº“
- ä¸å†ä¾èµ–CodeBuddy SDK
- å¯ä»¥æ­£å¸¸è¯»å–37å¼ é¢„è®¾å¡ç‰‡

### ç°åœ¨å¯ä»¥
- å¯åŠ¨æœåŠ¡åç›´æ¥ä½¿ç”¨å¯¹è¯AI
- åŸºäºçŸ¥è¯†åº“å›ç­”é—®é¢˜
- æŸ¥çœ‹çŸ¥è¯†æ¥æºå’Œç›¸ä¼¼åº¦

### ä½¿ç”¨æ–¹å¼
```cmd
# 1. å¯åŠ¨æœåŠ¡
cd C:\test\antinet
start_all.bat

# 2. è®¿é—®å‰ç«¯
http://localhost:3000

# 3. ç‚¹å‡»å³ä¸‹è§’èŠå¤©å›¾æ ‡
# 4. è¾“å…¥é—®é¢˜æµ‹è¯•
```

**å¯¹è¯AIå·²æ¢å¤æ­£å¸¸ï¼Œå¯ä»¥ä½¿ç”¨æœ¬åœ°çŸ¥è¯†åº“ï¼** ğŸš€

---

*ä¿®å¤æ—¶é—´: 2026-01-26*  
*ä¿®æ”¹æ–‡ä»¶: src/components/ChatBotModal.tsx*  
*çŠ¶æ€: å·²ä¿®å¤*
