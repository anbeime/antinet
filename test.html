<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Antinet æµ‹è¯•é¡µé¢</title>
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body { font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif; background: #0f172a; color: #e2e8f0; padding: 20px; }
        .container { max-width: 1200px; margin: 0 auto; }
        h1 { color: #3b82f6; margin-bottom: 20px; }
        .section { background: #1e293b; border-radius: 8px; padding: 20px; margin-bottom: 20px; }
        .section h2 { color: #10b981; margin-bottom: 15px; }
        button { background: #3b82f6; color: white; border: none; padding: 10px 20px; border-radius: 4px; cursor: pointer; margin-right: 10px; }
        button:hover { background: #2563eb; }
        .result { background: #0f172a; padding: 15px; border-radius: 4px; margin-top: 15px; font-family: 'Courier New', monospace; white-space: pre-wrap; }
        .status { padding: 10px; border-radius: 4px; margin-bottom: 10px; }
        .status.success { background: #059669; }
        .status.error { background: #dc2626; }
        .status.info { background: #2563eb; }
        input[type="text"] { width: 100%; padding: 10px; background: #0f172a; border: 1px solid #334155; color: white; border-radius: 4px; margin-bottom: 10px; }
        .cards { display: grid; grid-template-columns: repeat(auto-fit, minmax(250px, 1fr)); gap: 15px; margin-top: 15px; }
        .card { padding: 20px; border-radius: 8px; }
        .card.blue { background: #3b82f6; }
        .card.green { background: #10b981; }
        .card.yellow { background: #f59e0b; }
        .card.red { background: #ef4444; }
        .card h3 { margin-bottom: 10px; font-size: 18px; }
    </style>
</head>
<body>
    <div class="container">
        <h1>ğŸš€ Antinet æ™ºèƒ½çŸ¥è¯†ç®¡å®¶ - æµ‹è¯•é¡µé¢</h1>
        
        <div class="section">
            <h2>ğŸ“Š æœåŠ¡çŠ¶æ€</h2>
            <button onclick="checkHealth()">æ£€æŸ¥åç«¯å¥åº·çŠ¶æ€</button>
            <button onclick="checkModels()">æŸ¥çœ‹å¯ç”¨æ¨¡å‹</button>
            <div id="healthResult" class="result"></div>
        </div>

        <div class="section">
            <h2>ğŸ§  NPU æ•°æ®åˆ†æ</h2>
            <input type="text" id="queryInput" placeholder="è¾“å…¥è¦åˆ†æçš„é—®é¢˜ï¼Œä¾‹å¦‚ï¼šåˆ†æä¸€ä¸‹ç«¯ä¾§AIçš„ä¼˜åŠ¿" value="åˆ†æä¸€ä¸‹ç«¯ä¾§AIçš„ä¼˜åŠ¿">
            <br>
            <button onclick="analyzeData()">æ‰§è¡Œ NPU æ¨ç†</button>
            <div id="analyzeResult"></div>
        </div>

        <div class="section">
            <h2>ğŸ“ˆ æ€§èƒ½ç›‘æ§</h2>
            <button onclick="runBenchmark()">è¿è¡Œæ€§èƒ½åŸºå‡†æµ‹è¯•</button>
            <div id="benchmarkResult" class="result"></div>
        </div>
    </div>

    <script>
        const API_BASE = 'http://localhost:8000';

        async function checkHealth() {
            const result = document.getElementById('healthResult');
            try {
                const response = await fetch(`${API_BASE}/api/health`);
                const data = await response.json();
                result.innerHTML = `<div class="status success">âœ… åç«¯è¿è¡Œæ­£å¸¸</div>
<pre>${JSON.stringify(data, null, 2)}</pre>`;
            } catch (error) {
                result.innerHTML = `<div class="status error">âŒ è¿æ¥å¤±è´¥ï¼š${error.message}</div>`;
            }
        }

        async function checkModels() {
            const result = document.getElementById('healthResult');
            try {
                const response = await fetch(`${API_BASE}/api/npu/models`);
                const data = await response.json();
                result.innerHTML = `<div class="status info">ğŸ“‹ å¯ç”¨æ¨¡å‹</div>
<pre>${JSON.stringify(data, null, 2)}</pre>`;
            } catch (error) {
                result.innerHTML = `<div class="status error">âŒ è·å–æ¨¡å‹å¤±è´¥ï¼š${error.message}</div>`;
            }
        }

        async function analyzeData() {
            const query = document.getElementById('queryInput').value;
            const result = document.getElementById('analyzeResult');
            
            result.innerHTML = '<div class="status info">â³ æ­£åœ¨æ‰§è¡Œ NPU æ¨ç†ï¼Œè¯·ç¨å€™...</div>';
            
            try {
                const response = await fetch(`${API_BASE}/api/npu/analyze`, {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify({ query, max_tokens: 128 })
                });
                const data = await response.json();
                
                if (data.cards) {
                    const cardsHtml = data.cards.map(card => `
                        <div class="card ${card.color}">
                            <h3>${card.category} - ${card.title}</h3>
                            <p>${card.content}</p>
                        </div>
                    `).join('');
                    
                    result.innerHTML = `
                        <div class="status success">âœ… æ¨ç†å®Œæˆ (è€—æ—¶: ${data.performance?.toFixed(2) || 'N/A'}ms)</div>
                        <div class="cards">${cardsHtml}</div>
                    `;
                } else {
                    result.innerHTML = `<div class="status success">âœ… æ¨ç†å®Œæˆ</div>
<pre>${JSON.stringify(data, null, 2)}</pre>`;
                }
            } catch (error) {
                result.innerHTML = `<div class="status error">âŒ æ¨ç†å¤±è´¥ï¼š${error.message}</div>`;
            }
        }

        async function runBenchmark() {
            const result = document.getElementById('benchmarkResult');
            result.innerHTML = '<div class="status info">â³ æ­£åœ¨è¿è¡ŒåŸºå‡†æµ‹è¯•ï¼Œè¯·ç¨å€™...</div>';
            
            try {
                const response = await fetch(`${API_BASE}/api/performance/benchmark`);
                const data = await response.json();
                
                let html = '<div class="status success">âœ… åŸºå‡†æµ‹è¯•å®Œæˆ</div>\n';
                html += '<h3>æ€§èƒ½æŒ‡æ ‡</h3>\n';
                
                if (data.metrics) {
                    html += `<table style="width: 100%; border-collapse: collapse;">`;
                    html += `<tr style="background: #1e293b;"><th style="padding: 8px; text-align: left;">æŒ‡æ ‡</th><th style="padding: 8px; text-align: left;">å€¼</th></tr>`;
                    for (const [key, value] of Object.entries(data.metrics)) {
                        html += `<tr style="border-bottom: 1px solid #334155;"><td style="padding: 8px;">${key}</td><td style="padding: 8px;">${value}</td></tr>`;
                    }
                    html += `</table>`;
                }
                
                result.innerHTML = html;
            } catch (error) {
                result.innerHTML = `<div class="status error">âŒ åŸºå‡†æµ‹è¯•å¤±è´¥ï¼š${error.message}</div>`;
            }
        }

        // è‡ªåŠ¨æ£€æŸ¥å¥åº·çŠ¶æ€
        checkHealth();
    </script>
</body>
</html>
